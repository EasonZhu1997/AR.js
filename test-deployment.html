<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR.js éƒ¨ç½²æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .status {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }
        .status.error {
            border-left-color: #f44336;
        }
        .status.warning {
            border-left-color: #ff9800;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        .test-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        .file-list {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
        .success {
            color: #4CAF50;
            font-weight: bold;
        }
        .error {
            color: #f44336;
            font-weight: bold;
        }
        .warning {
            color: #ff9800;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ AR.js éƒ¨ç½²æµ‹è¯•é¡µé¢</h1>
        
        <div class="status">
            <h3>ğŸ“‹ éƒ¨ç½²çŠ¶æ€</h3>
            <p>æ­¤é¡µé¢ç”¨äºéªŒè¯ AR.js é¡¹ç›®çš„éƒ¨ç½²æ˜¯å¦æˆåŠŸã€‚</p>
        </div>

        <div class="test-section">
            <h3>ğŸ” æ„å»ºæ–‡ä»¶æ£€æŸ¥</h3>
            <div id="build-status">æ£€æŸ¥ä¸­...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-button" onclick="testAframe()">æµ‹è¯• A-Frame ç‰ˆæœ¬</button>
            <button class="test-button" onclick="testThreeJS()">æµ‹è¯• Three.js ç‰ˆæœ¬</button>
            <button class="test-button" onclick="testExamples()">æµ‹è¯•ç¤ºä¾‹æ–‡ä»¶</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“ å¯ç”¨æ–‡ä»¶åˆ—è¡¨</h3>
            <div id="file-list" class="file-list">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“± ç§»åŠ¨è®¾å¤‡æµ‹è¯•</h3>
            <p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ‰“å¼€æ­¤é¡µé¢ä»¥æµ‹è¯• AR åŠŸèƒ½ï¼š</p>
            <div id="mobile-info"></div>
        </div>
    </div>

    <script>
        // æ£€æŸ¥æ„å»ºæ–‡ä»¶
        async function checkBuildFiles() {
            const buildStatus = document.getElementById('build-status');
            const files = [
                'aframe/build/aframe-ar.js',
                'aframe/build/aframe-ar-nft.js',
                'three.js/build/ar-threex.js',
                'three.js/build/ar.js'
            ];
            
            let allExist = true;
            let statusHtml = '<h4>æ„å»ºæ–‡ä»¶çŠ¶æ€ï¼š</h4>';
            
            for (const file of files) {
                try {
                    const response = await fetch(file);
                    if (response.ok) {
                        statusHtml += `<p class="success">âœ… ${file} - å­˜åœ¨</p>`;
                    } else {
                        statusHtml += `<p class="error">âŒ ${file} - ç¼ºå¤±</p>`;
                        allExist = false;
                    }
                } catch (error) {
                    statusHtml += `<p class="error">âŒ ${file} - é”™è¯¯: ${error.message}</p>`;
                    allExist = false;
                }
            }
            
            if (allExist) {
                statusHtml += '<p class="success">ğŸ‰ æ‰€æœ‰æ„å»ºæ–‡ä»¶æ£€æŸ¥é€šè¿‡ï¼</p>';
            } else {
                statusHtml += '<p class="warning">âš ï¸ éƒ¨åˆ†æ„å»ºæ–‡ä»¶ç¼ºå¤±ï¼Œè¯·æ£€æŸ¥æ„å»ºè¿‡ç¨‹ã€‚</p>';
            }
            
            buildStatus.innerHTML = statusHtml;
        }

        // æµ‹è¯• A-Frame ç‰ˆæœ¬
        function testAframe() {
            try {
                // å°è¯•åŠ è½½ A-Frame AR.js
                const script = document.createElement('script');
                script.src = 'aframe/build/aframe-ar.js';
                script.onload = () => {
                    alert('âœ… A-Frame ç‰ˆæœ¬åŠ è½½æˆåŠŸï¼');
                };
                script.onerror = () => {
                    alert('âŒ A-Frame ç‰ˆæœ¬åŠ è½½å¤±è´¥ï¼');
                };
                document.head.appendChild(script);
            } catch (error) {
                alert('âŒ æµ‹è¯•å¤±è´¥: ' + error.message);
            }
        }

        // æµ‹è¯• Three.js ç‰ˆæœ¬
        function testThreeJS() {
            try {
                // å°è¯•åŠ è½½ Three.js AR.js
                const script = document.createElement('script');
                script.src = 'three.js/build/ar-threex.js';
                script.onload = () => {
                    alert('âœ… Three.js ç‰ˆæœ¬åŠ è½½æˆåŠŸï¼');
                };
                script.onerror = () => {
                    alert('âŒ Three.js ç‰ˆæœ¬åŠ è½½å¤±è´¥ï¼');
                };
                document.head.appendChild(script);
            } catch (error) {
                alert('âŒ æµ‹è¯•å¤±è´¥: ' + error.message);
            }
        }

        // æµ‹è¯•ç¤ºä¾‹æ–‡ä»¶
        function testExamples() {
            const examples = [
                'aframe/examples/marker-based/basic.html',
                'aframe/examples/image-tracking/nft/index.html',
                'three.js/examples/basic.html'
            ];
            
            let availableExamples = 0;
            examples.forEach(example => {
                fetch(example)
                    .then(response => {
                        if (response.ok) availableExamples++;
                    })
                    .catch(() => {});
            });
            
            setTimeout(() => {
                alert(`ğŸ“ ç¤ºä¾‹æ–‡ä»¶æ£€æŸ¥å®Œæˆï¼\nå¯ç”¨ç¤ºä¾‹: ${availableExamples}/${examples.length}`);
            }, 1000);
        }

        // æ£€æŸ¥ç§»åŠ¨è®¾å¤‡
        function checkMobile() {
            const mobileInfo = document.getElementById('mobile-info');
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                mobileInfo.innerHTML = `
                    <p class="success">ğŸ“± æ£€æµ‹åˆ°ç§»åŠ¨è®¾å¤‡</p>
                    <p>æ‚¨å¯ä»¥æµ‹è¯• AR åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
                    <ul>
                        <li>æ‘„åƒå¤´è®¿é—®</li>
                        <li>æ ‡è®°è·Ÿè¸ª</li>
                        <li>å›¾åƒè·Ÿè¸ª</li>
                        <li>åŸºäºä½ç½®çš„ AR</li>
                    </ul>
                `;
            } else {
                mobileInfo.innerHTML = `
                    <p class="warning">ğŸ’» æ¡Œé¢è®¾å¤‡</p>
                    <p>æŸäº› AR åŠŸèƒ½åœ¨æ¡Œé¢è®¾å¤‡ä¸Šå¯èƒ½å—é™ã€‚</p>
                    <p>å»ºè®®åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•å®Œæ•´åŠŸèƒ½ã€‚</p>
                `;
            }
        }

        // è·å–æ–‡ä»¶åˆ—è¡¨
        async function getFileList() {
            try {
                const response = await fetch('/');
                const html = await response.text();
                const fileList = document.getElementById('file-list');
                
                // ç®€å•çš„æ–‡ä»¶åˆ—è¡¨è§£æ
                const files = html.match(/href="([^"]+)"/g) || [];
                const uniqueFiles = [...new Set(files.map(f => f.replace('href="', '').replace('"', '')))];
                
                fileList.innerHTML = '<h4>æ ¹ç›®å½•æ–‡ä»¶ï¼š</h4>' + 
                    uniqueFiles.slice(0, 20).map(f => `<div>ğŸ“„ ${f}</div>`).join('') +
                    (uniqueFiles.length > 20 ? `<div>... è¿˜æœ‰ ${uniqueFiles.length - 20} ä¸ªæ–‡ä»¶</div>` : '');
            } catch (error) {
                document.getElementById('file-list').innerHTML = `<div class="error">æ— æ³•è·å–æ–‡ä»¶åˆ—è¡¨: ${error.message}</div>`;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.addEventListener('load', () => {
            checkBuildFiles();
            checkMobile();
            getFileList();
        });
    </script>
</body>
</html>

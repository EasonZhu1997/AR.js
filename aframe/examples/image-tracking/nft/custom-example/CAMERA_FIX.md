# 📷 摄像头权限问题解决指南

## 🚨 常见问题

### 1. 浏览器显示"没有摄像头权限"
- 浏览器阻止了摄像头访问
- 需要手动允许权限

### 2. 摄像头图标显示为阻止状态
- 地址栏左侧的摄像头图标显示为 ❌
- 表示权限被拒绝

### 3. 页面显示"需要摄像头权限"
- 页面会显示权限请求界面
- 点击"允许摄像头访问"按钮

## 🔧 解决方法

### 方法 1: 自动权限请求
1. 刷新页面
2. 等待权限请求界面出现
3. 点击"允许摄像头访问"按钮
4. 在浏览器弹出的权限对话框中选择"允许"

### 方法 2: 手动设置权限

#### Chrome 浏览器
1. 点击地址栏左侧的摄像头图标 📷
2. 选择"允许"或"始终允许"
3. 刷新页面

#### Safari 浏览器
1. 点击地址栏左侧的摄像头图标 📷
2. 选择"允许"
3. 刷新页面

#### Firefox 浏览器
1. 点击地址栏左侧的摄像头图标 📷
2. 选择"允许"
3. 刷新页面

### 方法 3: 浏览器设置
1. 打开浏览器设置
2. 搜索"摄像头"或"权限"
3. 找到摄像头权限设置
4. 允许 localhost 访问摄像头

## 📱 移动设备特殊说明

### iOS 设备
- 确保在"设置 > 隐私与安全性 > 摄像头"中允许浏览器访问
- Safari 浏览器权限设置可能更严格

### Android 设备
- 确保在"设置 > 应用 > 浏览器 > 权限"中允许摄像头
- Chrome 浏览器通常权限管理更灵活

## 🎯 测试步骤

### 1. 检查权限状态
- 查看页面右上角的状态指示器
- 绿色 = 摄像头已开启
- 红色 = 摄像头关闭或权限被拒绝

### 2. 权限请求流程
1. 页面加载完成后自动检查权限
2. 如果没有权限，显示权限请求界面
3. 点击"允许摄像头访问"
4. 浏览器弹出权限对话框
5. 选择"允许"
6. 摄像头启动，状态变为绿色

### 3. 验证成功
- 状态指示器显示"摄像头: 开启"
- 信息面板显示"状态: 已开启"
- 可以正常使用 AR 功能

## 🐛 故障排除

### 问题 1: 权限请求界面不显示
**解决方案:**
- 刷新页面
- 检查浏览器是否阻止了弹窗
- 确认 JavaScript 已启用

### 问题 2: 点击允许后仍然无法使用
**解决方案:**
- 刷新页面
- 检查浏览器控制台错误信息
- 尝试关闭其他使用摄像头的应用

### 问题 3: 移动设备权限问题
**解决方案:**
- 在设备设置中检查浏览器权限
- 尝试使用不同的浏览器
- 重启设备后重试

### 问题 4: 浏览器不支持
**解决方案:**
- 更新浏览器到最新版本
- 使用推荐的浏览器：Chrome、Safari、Firefox
- 检查是否支持 HTTPS（某些功能需要安全连接）

## 🔍 调试信息

### 浏览器控制台
打开开发者工具 (F12)，查看控制台输出：
- `摄像头启动成功` = 权限获取成功
- `摄像头权限请求失败` = 权限被拒绝
- `摄像头启动失败` = 硬件或驱动问题

### 网络请求
检查以下文件是否正确加载：
- `aframe-ar-nft.js` - AR.js 库文件
- `gtt.fset/fset3/iset` - 识别文件
- `scene.gltf` - 3D 模型文件

## 📋 检查清单

在测试前，请确认：
- [ ] 设备有摄像头
- [ ] 浏览器支持 getUserMedia API
- [ ] 没有其他应用占用摄像头
- [ ] 浏览器权限设置正确
- [ ] 页面通过 HTTP 服务器访问（不是 file:// 协议）

## 🆘 如果问题仍然存在

1. **收集信息**:
   - 浏览器类型和版本
   - 操作系统版本
   - 错误信息截图
   - 控制台错误日志

2. **尝试替代方案**:
   - 使用不同的浏览器
   - 在移动设备上测试
   - 检查是否有防火墙或安全软件阻止

3. **联系支持**:
   - 在 GitHub 上提交 Issue
   - 提供详细的错误信息和环境描述

---

**记住**: 摄像头权限是一次性设置，允许后通常不需要重复设置，除非清除浏览器数据。
